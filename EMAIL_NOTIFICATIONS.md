# Email 通知內容說明

本文檔展示系統中所有 Email 通知的完整內容。

---

## 📧 通知 1：提交申請 → 通知 EHS Manager

**觸發時機**：申請人成功提交申請後

**收件人**：EHS Manager（`cti912@hotmail.com`）

**主題**：`【施工安全作業許可】新申請待審核`

**內容範例**：
```
您好，

有一份新的施工安全作業許可申請需要您審核：
工單編號：EHS202601171430

申請人：Jack Chen
部門：維修部
施工區域：黑線

請點擊以下連結進行審核：
http://localhost:3000/applications/cmki2be280000lodqwed4ufpp

此為系統自動發送，請勿直接回覆此郵件。
```

---

## 📧 通知 2：EHS Manager 拒絕 → 通知申請人

**觸發時機**：EHS Manager 拒絕申請後

**收件人**：申請人（申請表單中填寫的 Email）

**主題**：`【施工安全作業許可】申請已拒絕`

**內容範例**：
```
您好，

您的施工安全作業許可申請審核結果：已拒絕
工單編號：EHS202601171430

審核意見：
申請資料不完整，請補充施工安全措施說明。

請點擊以下連結查看詳細資訊：
http://localhost:3000/applications/cmki2be280000lodqwed4ufpp

此為系統自動發送，請勿直接回覆此郵件。
```

---

## 📧 通知 3：EHS Manager 通過 → 通知部門主管

**觸發時機**：EHS Manager 通過申請後

**收件人**：部門主管（`afn3028@gmail.com`）

**主題**：`【施工安全作業許可】申請待最終審核`

**內容範例**：
```
您好，

有一份施工安全作業許可申請已通過 EHS 審核，需要您進行最終審核：
工單編號：EHS202601171430

申請人：Jack Chen
部門：維修部
施工區域：黑線

請點擊以下連結進行審核：
http://localhost:3000/applications/cmki2be280000lodqwed4ufpp

此為系統自動發送，請勿直接回覆此郵件。
```

---

## 📧 通知 4：部門主管拒絕 → 通知 EHS Manager

**觸發時機**：部門主管拒絕申請後

**收件人**：EHS Manager（`cti912@hotmail.com`）

**主題**：`【施工安全作業許可】申請被部門主管拒絕`

**內容範例**：
```
您好，

您之前審核通過的施工安全作業許可申請已被部門主管拒絕：
工單編號：EHS202601171430

申請人：Jack Chen
部門：維修部
施工區域：黑線

拒絕原因：
施工時間與其他作業衝突，建議調整作業時間。

請點擊以下連結查看詳情：
http://localhost:3000/applications/cmki2be280000lodqwed4ufpp

此為系統自動發送，請勿直接回覆此郵件。
```

---

## 📧 通知 5：部門主管拒絕 → 通知申請人

**觸發時機**：部門主管拒絕申請後（與通知 4 同時發送）

**收件人**：申請人（申請表單中填寫的 Email）

**主題**：`【施工安全作業許可】申請已拒絕`

**內容範例**：
```
您好，

您的施工安全作業許可申請審核結果：已拒絕
工單編號：EHS202601171430

審核意見：
施工時間與其他作業衝突，建議調整作業時間。

請點擊以下連結查看詳細資訊：
http://localhost:3000/applications/cmki2be280000lodqwed4ufpp

此為系統自動發送，請勿直接回覆此郵件。
```

---

## 📧 通知 6：部門主管通過（完成審查）→ 通知 EHS Manager

**觸發時機**：部門主管通過申請後（完成全部審查流程）

**收件人**：EHS Manager（`cti912@hotmail.com`）

**主題**：`【施工安全作業許可】申請已完成審查`

**內容範例**：
```
您好，

您之前審核通過的施工安全作業許可申請已完成全部審查流程：
工單編號：EHS202601171430

申請人：Jack Chen
部門：維修部
施工區域：黑線

請點擊以下連結查看詳情：
http://localhost:3000/applications/cmki2be280000lodqwed4ufpp

此為系統自動發送，請勿直接回覆此郵件。
```

---

## 📧 通知 7：部門主管通過（完成審查）→ 通知申請人

**觸發時機**：部門主管通過申請後（與通知 6 同時發送）

**收件人**：申請人（申請表單中填寫的 Email）

**主題**：`【施工安全作業許可】申請已通過`

**內容範例**：
```
您好，

您的施工安全作業許可申請審核結果：已通過
工單編號：EHS202601171430

請點擊以下連結查看詳細資訊：
http://localhost:3000/applications/cmki2be280000lodqwed4ufpp

此為系統自動發送，請勿直接回覆此郵件。
```

---

## 📋 通知流程總覽

### 流程 1：EHS Manager 拒絕
1. ✅ 提交申請 → **通知 EHS Manager**
2. ❌ EHS Manager 拒絕 → **通知申請人**

### 流程 2：部門主管拒絕
1. ✅ 提交申請 → **通知 EHS Manager**
2. ✅ EHS Manager 通過 → **通知部門主管**
3. ❌ 部門主管拒絕 → **通知 EHS Manager** + **通知申請人**

### 流程 3：完成審查（全部通過）
1. ✅ 提交申請 → **通知 EHS Manager**
2. ✅ EHS Manager 通過 → **通知部門主管**
3. ✅ 部門主管通過 → **通知 EHS Manager** + **通知申請人**

---

## 🔍 查看通知

所有 Email 通知都會在**終端機**（運行 `npm run dev` 的視窗）中顯示，格式如下：

```
============================================================
📧 EMAIL NOTIFICATION
============================================================
To: [收件人 Email]
Subject: [郵件主題]
------------------------------------------------------------
[郵件內容]

Link: [查看詳情的連結]
============================================================
```

---

## 📝 注意事項

1. **Email 模擬**：目前所有通知都是模擬的（使用 `console.log`），不會實際發送 Email
2. **實際部署**：需要整合真實的 Email 服務（如 SendGrid、Nodemailer 等）才能發送真實郵件
3. **工單編號**：所有通知都包含工單編號（格式：`EHS202601171430`）
4. **拒絕原因**：拒絕時的通知會包含審核意見/拒絕原因

---

## 🧪 測試建議

1. **提交申請**：查看終端機，確認 EHS Manager 收到通知
2. **EHS Manager 拒絕**：查看終端機，確認申請人收到通知
3. **EHS Manager 通過 → 部門主管拒絕**：查看終端機，確認 EHS Manager 和申請人都收到通知
4. **EHS Manager 通過 → 部門主管通過**：查看終端機，確認 EHS Manager 和申請人都收到通知
